TTL (time-to-live) позволяет автоматически удалять ключи по истечении заданного времени. Для установки необходимо выполнить команду:
EXPIRE key 3600, где key - ключ, который будет удален через 3600 секунд.
Есть похожие команды:
EXPIREAT key 1735682400 - удалит ключ в конкретный таймстамп;
PEXPIRE key 3600000 - задаст ttl в миллисекундах.
TTL можно задать и при создании ключа: SET key "Daniil" EX 60.
Важная особенность для хешей/списков/других структур: TTL задаётся на весь ключ, а не на отдельные элементы.
Для проверки оставшегося времени жизни ключа можно выполнить команду
ttl key, которая вернет -2(если ключа нет)/-1(если TTL не задан)/любое число оставшихся секунд.
ttl можно и сбросить(технически установить в бессрочное значение) командой
PERSIST key.
ttl так же сбрасывается при изменении ключа.
